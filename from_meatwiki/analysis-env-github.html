<!DOCTYPE html>
<html>
  <head>
    <title>jdcat-analysis : 新しい分析環境を作る（GitHubから）</title>
    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body class="theme-default aui-theme-default">
    <div id="page">
      <div id="main" class="aui-page-panel">
        <div id="main-header">
          <div id="breadcrumb-section">
            <ol id="breadcrumbs">
              <li class="first">
                <span><a href="index.html">jdcat-analysis</a></span>
              </li>
              <li>
                <span><a href="analysis-overview.html">JDCat分析ツール</a></span>
              </li>
            </ol>
          </div>
          <h1 id="title-heading" class="pagetitle">
            <span id="title-text">
              jdcat-analysis : 新しい分析環境を作る（GitHubから）
            </span>
          </h1>
        </div>

        <div id="content" class="view">
          <div class="page-metadata">
            Created by <span class='author'> ikki</span>, last modified on 2024/04/04
          </div>

	  <!--ここから-->
          <div id="main-content" class="wiki-content group">
            <p>
	      JDCat分析ツールは、NIIが運用する
	      <a href="https://mybinder.readthedocs.io/" class="external-link" rel="nofollow">Binder</a>
	      というシステムを利用して、分析環境（JupyterHubを含むコンテナ環境）を自動的に構築・提供するサービスです。ユーザーは自分専用の分析環境をNIIのクラウド上に構築し、Jupyter NotebookやRStudioを使って任意の分析プログラムを作成・実行することができます。
	    </p>
	    <p>
	      Binderの機能を使うと、任意の依存パッケージがインストールされた分析環境を他のユーザーに提供する（自動構築させる）ことができます。この分析環境には、プログラムコードやデータファイルを含めておくこともできます。多数の受講者に同一の分析環境を使わせる講義・演習などの用途に便利です。
	    </p>
	    <p>
	      この機能を使うには、GitHubから新しい分析環境を作ります。
	    </p>
	    <ol>
	      <li>
		<a href="https://github.com/" class="external-link" rel="nofollow">GitHub</a>
		に公開リポジトリを用意し、次のファイルを置きます。不要なファイルは省略可能です。<br/>
		サンプル …
		<a href="https://github.com/ikfj/JDCat-base" rel="nofollow" class="external-link">https://github.com/ikfj/JDCat-base</a><br/>
		<a href="https://github.com/ikfj/JDCat-base" class="external-link" rel="nofollow"></a><br/>
		<ul>
		  <li>apt.txt … インストールするDebianパッケージを指定します。1行に1個のパッケージ名を書きます。</li>
		  <li>environment.yml … インストールするcondaパッケージを指定します。
		    <ul>
		      <li>
			次の例に倣ってYAML形式で書きます。<br/>
			<a href="https://github.com/binder-examples/python-conda_pip/blob/HEAD/environment.yml" class="external-link" rel="nofollow">
			  https://github.com/binder-examples/python-conda_pip/blob/HEAD/environment.yml
			</a>
		      </li>
		      <li>
			<code>channels:</code> に <code>conda-forge</code> を指定すると、次の一覧にあるパッケージがインストール可能になります。<br/>
			<a href="https://conda-forge.org/feedstock-outputs/" class="external-link" rel="nofollow">https://conda-forge.org/feedstock-outputs/</a>
		      </li>
		      <li>
			<code><span class="pl-ent">dependencies</span>:</code> に <code>r-base</code> が含まれている場合、別途指定しなくても
			<a href="https://www.rstudio.com/" class="external-link" rel="nofollow">RStudio</a>
			と
			<a href="https://shiny.rstudio.com/" class="external-link" rel="nofollow">Shiny</a>
			が自動的にインストールされます。
		      </li>
		    </ul>
		  </li>
		  <li>postBuild … インストール後、起動直前に実行するコマンドを指定します。</li>
		  <li>その他、
		    <a href="https://mybinder.readthedocs.io/en/latest/using/config_files.html" class="external-link" rel="nofollow">
		      Binderのマニュアル</a>にある定義ファイルが利用可能です。<br/>
		    </li>
		  <li>定義ファイルの他に、任意のプログラムコード (Jupyter Notebook) やデータファイルを置くことができます。
		    <ul>
		      <li>GitHubに置くファイルサイズは100MB程度までを目安とし、大きいファイルは環境構築後にダウンロードするようにしてください。
			<br/><br/>
		      </li>
		    </ul>
		  </li>
		  <li>活用例として次のリポジトリが参考になります。<br/>
		    <ul>
		      <li>
			<a href="https://github.com/JaehyunSong/Binder_R" class="external-link" rel="nofollow">https://github.com/JaehyunSong/Binder_R</a>
		      </li>
		      <li>
			<a href="https://github.com/binder-examples/r-conda" class="external-link" rel="nofollow">https://github.com/binder-examples/r-conda</a>
			<a href="https://github.com/binder-examples/r-conda" class="external-link" rel="nofollow"><br/></a>
			</li>
		    </ul>
		  </li>
		</ul>
	      </li>
	      <li>
		<a href="https://binder.cs.rcos.nii.ac.jp/" class="external-link" rel="nofollow">https://binder.cs.rcos.nii.ac.jp/</a>
		にアクセスし、「GitHub repository name or URL」テキストボックスにGitHubのURLを入力します。<br/>
		<p>
		  <span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size">
		    <img draggable="false" width="600" src="https://nii-gakunin-cloud.github.io/jdcat-analysis/attachments/88608304.png" alt="">
		  </span>
		  <br/><br/>
		</p>
	      </li>
	      <li>
		「Copy the URL below and share your Binder with others」の下に表示されたURLをコピーします。他のユーザーに同じ分析環境を構築させるには、このURLを伝えます。
		<br/><br/>
	      </li>
	      <li>
		コピーしたURLにアクセスするか、橙色の「launch」ボタンをクリックします。
		<br/><br/>
	      </li>
	      <li>
		<p>
		  ログイン画面が表示されます。所属機関から「Orthros」を選び、「選択」ボタンをクリックします。
		</p>
		<p style="text-align: center;">
		  <span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size">
		    <img draggable="false" height="250" width="463" src="https://nii-gakunin-cloud.github.io/jdcat-analysis/attachments/130024578.png" alt="">
		  </span>
		</p>
		<p>
		  <br/>
		</p>
		<ul>
		  <li>
		    <p>
		      Orthrosアカウントをまだお持ちでない方は、Orthrosアカウントを作成してください。
			  →<a href="analysis-orthros-signup.html" rel="nofollow">
			Orthrosアカウントの作り方
		      </a>
		    </p>
		  </li>
		  <li>
		    <p
		      >Orthrosアカウントをすでにお持ちの方は、Orthrosアカウントでログインしてください。
			  →<a href="analysis-orthros-signin.html" rel="nofollow">
			Orthrosアカウントの使い方
		      </a>
		    </p>
		  </li>
		</ul>
	      </li>
	      <li>
		<p>
		  新しい分析環境が作成されます。リポジトリのサイズによって、最大15分ほどお待ちいただく場合があります。
		  <br/><br/>
		    <img draggable="false" width="600" src="https://nii-gakunin-cloud.github.io/jdcat-analysis/attachments/88608308.png" alt="">
		</p>
		<ul>
		  <li>
		    <p>
		      → <a href="analysis-In-case-of-error-jp.html">エラーが発生したときは<br /></a>
		    </p>
		  </li>
		</ul>
	      </li>
	      <li>
		新しい分析環境でJupyterLabが起動します。<br/>
		<p>
		  <br/>
		</p>
		  <img draggable="false" width="600" src="https://nii-gakunin-cloud.github.io/jdcat-analysis/attachments/148050036.png"alt="">
		<br/>
		<ul>
		  <li>PCにあるファイルをアップロードするには、左側のサイドバー領域にファイルをドラッグ＆ドロップします。</li>
		  <li>Jupyter Notebookを使ってPythonやRのプログラムを書くには、「Python 3 (ipykernel)」または「R」を選択します。</li>
		  <li>RStudioを使うには、「RStudio」を選択します。</li>
		  <li>この分析環境を削除したり、ご自身が作った他の分析環境へ切り替えたりするには、メニューから「File」→「Hub Control Panel」をクリックするか、
		    <a href="https://jupyter.cs.rcos.nii.ac.jp/" class="external-link" rel="nofollow">https://jupyter.cs.rcos.nii.ac.jp/</a>
		    にアクセスします。</li>
		  <li>従来の JupyterHub 画面に切り替えるには、URL末尾の「/lab」を「/tree」に書き換えてEnterキーを押します。<br/></li>
		</ul>
	      </li>
	      <li>作業が終わったら、この分析環境を削除します。
		→<a href="analysis-env-del.html">分析環境を削除する
		  <br /><br />
		</a>
		<ul>
		  <li>
		    一人のユーザーが同時に持てる分析環境は10個までです（2023年10月現在）。この数に達すると、Binderの画面でエラーが発生し、新しい分析環境を作れません。
		  </li>
		  <li>分析環境を使用せず放置した場合、30日経過後にNIIの管理者が削除させていただきます。
		    <br/></li>
		</ul>
	      </li>
	      <li>分析環境をお持ちの方には、システムのメンテナンス予告などの情報をお知らせするため、NIIからメールが届く場合があります。ご了承ください。</li>
	    </ol>
	    <p>
	      <br/>
	    </p>
          </div>

	  <!--ここまで-->

	  <div id="footer" role="contentinfo">
            <section class="footer-body">
              <p>Document generated by Confluence on 2025/07/24 16:17</p>
            </section>
	  </div>
	</div>
  </body>
</html>
